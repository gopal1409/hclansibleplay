---
  - name: install and configure tomcat
    hosts: worker
    vars:
      req_java: openjdk-11-jdk
      set_java: jre-1.8.0-openjdk
      req_tomcat_ver: 9.0.54
      tomcat_url: https://dlcdn.apache.org/tomcat/tomcat-{{req_tomcat_ver.split('.')[0]}}/v{{req_tomcat_ver}}/bin/apache-tomcat-{{req_tomcat_ver}}.tar.gz
    tasks:
      - name: update
        apt: update_cache=yes force_apt_get=yes
      - name: update the repos
        apt:
         name: "*"
         state: latest
      - name: install the required java 
        apt:
          name: "{{req_java}}"  
          state: present
      - name: add tomcat group
        group:
          name: tomcat 
      - name: add tomcat user
        user:
          name: tomcat
          group: tomcat 
          home: /user/share/tomcat
          createhome: no